"use strict";(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[587],{4763:function(e,a,s){s.r(a),s.d(a,{default:function(){return y}});var t=s(951),l=(s(444),s(9714)),o=s(6252);const r=e=>((0,o.dD)("data-v-34faada0"),e=e(),(0,o.Cn)(),e),n={class:"user-profile"},i=r((()=>(0,o._)("h2",{class:"profile-title"},"Edit My Avatar",-1))),u={key:0,class:"profile-content"},d=["src"],p={class:"btn-box"};function c(e,a,s,r,c,f){const h=l.Z,m=t.ElButton;return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(h,{handleCollapse:c.handleCollapse,isCollapse:c.isCollapse},null,8,["handleCollapse","isCollapse"]),(0,o._)("div",n,[i,e.userInfo?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("img",{src:e.file||f.gravatarUrl,alt:"用户头像",class:"user-avatar"},null,8,d)])):(0,o.kq)("",!0),(0,o._)("div",p,[(0,o.Wm)(m,{type:"primary",class:"chooseAvg"},{default:(0,o.w5)((()=>[(0,o._)("input",{type:"file",name:"file",accept:".jpg,.png,.gif,.bmp",id:"file",onChange:a[0]||(a[0]=(...e)=>f.choose&&f.choose(...e))},null,32),(0,o.Uk)(" Choose Avatar ")])),_:1}),(0,o.Wm)(m,{type:"primary",onClick:f.uploadImg},{default:(0,o.w5)((()=>[(0,o.Uk)("Confirm Avatar")])),_:1},8,["onClick"])])])],64)}var f=s(8854),h=s(3907),m=s(2082),g=s(1464),v={data(){return{isCollapse:!1,handleCollapse:null,avg:""}},computed:{...(0,h.rn)({userInfo:e=>e.userInfo}),gravatarUrl(){return this.userInfo&&this.userInfo.emailAddress?null===this.userInfo.avatar?"http://akarana.oss-ap-southeast-1.aliyuncs.com/car1.jpg":this.userInfo.avatar:""}},methods:{choose(e){let a=window.event||e;if(a.target.files[0].size>5242880);else{let e=a.target.files[0];const s=new FormData;s.append("avatar",e),this.formdate=s;let t=new FileReader;t.readAsDataURL(e),t.onload=e=>{this.file=e.target.result}}(0,g.z8)({message:"Choose Complete",type:"success"})},async uploadImg(){const{data:e}=await m.Z.post(`/api/avatar/${this.userInfo.username}`,this.formdate,{headers:{"Content-Type":"multipart/form-data"}});console.log(e),localStorage.removeItem("userInfo"),f.Z.dispatch({type:"getUserInfo",payload:this.userInfo.id}),(0,g.z8)({message:"Confirmed",type:"success"})}}},C=s(3744);const I=(0,C.Z)(v,[["render",c],["__scopeId","data-v-34faada0"]]);var y=I}}]);
//# sourceMappingURL=587.55eec99d.js.map
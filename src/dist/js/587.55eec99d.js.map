{"version":3,"file":"js/587.55eec99d.js","mappings":"wMACA,MAAMA,EAAeC,KAAM,QAAa,mBAAoBA,EAAIA,KAAK,UAAeA,GAC9EC,EAAa,CACjBC,MAAO,gBAEHC,EAA0BJ,GAAa,KAAmB,IAAAK,GAAoB,KAAM,CACxFF,MAAO,iBACN,kBAAmB,KAChBG,EAAa,CACjBC,IAAK,EACLJ,MAAO,mBAEHK,EAAa,CAAC,OACdC,EAAa,CACjBN,MAAO,WAEF,SAASO,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,EAAoB,IACpBC,EAAuB,WAC7B,OAAO,WAAc,QAAoB,KAAW,KAAM,EAAC,QAAaD,EAAmB,CACzFE,eAAgBJ,EAAMI,eACtBC,WAAYL,EAAMK,YACjB,KAAM,EAAG,CAAC,iBAAkB,gBAAgB,IAAAf,GAAoB,MAAOH,EAAY,CAACE,EAAYO,EAAKU,WAAY,WAAc,QAAoB,MAAOf,EAAY,EAAC,IAAAD,GAAoB,MAAO,CACnMiB,IAAKX,EAAKY,MAAQP,EAASQ,YAC3BC,IAAK,OACLtB,MAAO,eACN,KAAM,EAAGK,OAAiB,QAAoB,IAAI,IAAO,IAAAH,GAAoB,MAAOI,EAAY,EAAC,QAAaS,EAAsB,CACrIQ,KAAM,UACNvB,MAAO,aACN,CACDwB,SAAS,SAAS,IAAM,EAAC,IAAAtB,GAAoB,QAAS,CACpDqB,KAAM,OACNE,KAAM,OACNC,OAAQ,sBACRC,GAAI,OACJC,SAAUnB,EAAO,KAAOA,EAAO,GAAK,IAAIoB,IAAShB,EAASiB,QAAUjB,EAASiB,UAAUD,KACtF,KAAM,KAAK,QAAiB,sBAC/B3B,EAAG,KACD,QAAaa,EAAsB,CACrCQ,KAAM,UACNQ,QAASlB,EAASmB,WACjB,CACDR,SAAS,SAAS,IAAM,EAAC,QAAiB,qBAC1CtB,EAAG,GACF,EAAG,CAAC,iBAAkB,GAC3B,C,4CCzCA,GACE+B,OACE,MAAO,CACLhB,YAAY,EACZD,eAAgB,KAChBkB,IAAK,GAET,EACAC,SAAU,KACL,QAAS,CACVjB,SAAUkB,GAASA,EAAMlB,WAE3BG,cACE,OAAIgB,KAAKnB,UAAYmB,KAAKnB,SAASoB,aACD,OAAzBD,KAAKnB,SAASqB,OAAkB,0DAA4DF,KAAKnB,SAASqB,OAE5G,EACT,GAEFC,QAAS,CACPV,OAAOW,GACL,IAAIC,EAAIC,OAAOF,OAASA,EACxB,GAAIC,EAAEE,OAAOC,MAAM,GAAGC,KAAO,aAAyB,CACpD,IAAI1B,EAAOsB,EAAEE,OAAOC,MAAM,GAC1B,MAAME,EAAW,IAAIC,SACrBD,EAASE,OAAO,SAAU7B,GAC1BiB,KAAKU,SAAWA,EAChB,IAAIG,EAAS,IAAIC,WACjBD,EAAOE,cAAchC,GACrB8B,EAAOG,OAASC,IACdjB,KAAKjB,KAAOkC,EAAOV,OAAOU,MAAM,CAEpC,EAGA,QAAU,CACRC,QAAS,kBACThC,KAAM,WAEV,EACAiC,kBACE,MAAM,KACJvB,SACQ,SAAU,eAAeI,KAAKnB,SAASuC,WAAYpB,KAAKU,SAAU,CAC1EW,QAAS,CACP,eAAgB,yBAGpBC,QAAQC,IAAI3B,GACZ4B,aAAaC,WAAW,YACxBC,EAAA,WAAe,CACbxC,KAAM,cACNyC,QAAS3B,KAAKnB,SAASS,MAIzB,QAAU,CACR4B,QAAS,YACThC,KAAM,WAEV,I,UCzDJ,MAAM0C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS1D,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://front-end/./src/views/Avatar.vue?6be7","webpack://front-end/./src/views/Avatar.vue","webpack://front-end/./src/views/Avatar.vue?ea44"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-34faada0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"user-profile\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"profile-title\"\n}, \"Edit My Avatar\", -1));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"profile-content\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"btn-box\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Header, {\n    handleCollapse: $data.handleCollapse,\n    isCollapse: $data.isCollapse\n  }, null, 8, [\"handleCollapse\", \"isCollapse\"]), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _ctx.userInfo ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: _ctx.file || $options.gravatarUrl,\n    alt: \"用户头像\",\n    class: \"user-avatar\"\n  }, null, 8, _hoisted_4)])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    class: \"chooseAvg\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"input\", {\n      type: \"file\",\n      name: \"file\",\n      accept: \".jpg,.png,.gif,.bmp\",\n      id: \"file\",\n      onChange: _cache[0] || (_cache[0] = (...args) => $options.choose && $options.choose(...args))\n    }, null, 32), _createTextVNode(\" Choose Avatar \")]),\n    _: 1\n  }), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.uploadImg\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Confirm Avatar\")]),\n    _: 1\n  }, 8, [\"onClick\"])])])], 64);\n}","import store from \"../store/index\";\nimport { mapState } from \"vuex\";\nimport http from \"@/utils/request\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  data() {\n    return {\n      isCollapse: false,\n      handleCollapse: null,\n      avg: \"\"\n    };\n  },\n  computed: {\n    ...mapState({\n      userInfo: state => state.userInfo\n    }),\n    gravatarUrl() {\n      if (this.userInfo && this.userInfo.emailAddress) {\n        return this.userInfo.avatar === null ? \"http://akarana.oss-ap-southeast-1.aliyuncs.com/car1.jpg\" : this.userInfo.avatar;\n      }\n      return \"\";\n    }\n  },\n  methods: {\n    choose(event) {\n      let e = window.event || event;\n      if (e.target.files[0].size > 5 * 1024 * 1024) {} else {\n        let file = e.target.files[0];\n        const formdate = new FormData();\n        formdate.append(\"avatar\", file);\n        this.formdate = formdate;\n        let reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = result => {\n          this.file = result.target.result;\n        };\n      }\n\n      // 添加选择完成提示\n      ElMessage({\n        message: \"Choose Complete\",\n        type: \"success\"\n      });\n    },\n    async uploadImg() {\n      const {\n        data\n      } = await http.post(`/api/avatar/${this.userInfo.username}`, this.formdate, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      console.log(data);\n      localStorage.removeItem(\"userInfo\");\n      store.dispatch({\n        type: \"getUserInfo\",\n        payload: this.userInfo.id\n      });\n\n      // 添加上传成功提示\n      ElMessage({\n        message: \"Confirmed\",\n        type: \"success\"\n      });\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./Avatar.vue?vue&type=template&id=34faada0&scoped=true\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=34faada0&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/wucongzhen/Documents/GitHub/Akarana/src/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-34faada0\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_","_hoisted_3","key","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_Header","_component_el_button","handleCollapse","isCollapse","userInfo","src","file","gravatarUrl","alt","type","default","name","accept","id","onChange","args","choose","onClick","uploadImg","data","avg","computed","state","this","emailAddress","avatar","methods","event","e","window","target","files","size","formdate","FormData","append","reader","FileReader","readAsDataURL","onload","result","message","async","username","headers","console","log","localStorage","removeItem","store","payload","__exports__"],"sourceRoot":""}
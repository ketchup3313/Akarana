{"ast":null,"code":"import { mapState } from \"vuex\";\nimport CryptoJS from \"crypto-js\";\nimport GoogleAutocomplete from \"../components/GoogleAutocomplete.vue\";\nexport default {\n  data() {\n    return {\n      btnState: true,\n      emailError: \"\",\n      showEditForm: false,\n      isCollapse: false,\n      handleCollapse: null,\n      editedUserInfo: {\n        firstName: \"\",\n        lastName: \"\",\n        phoneNumber: \"\",\n        username: \"\",\n        password: \"\",\n        address: \"\",\n        emailAddress: \"\",\n        birthday: \"\",\n        gravatarEmail: \"\"\n      }\n    };\n  },\n  computed: {\n    ...mapState({\n      userInfo: state => state.userInfo\n    }),\n    // generate Gravatar URL\n    gravatarUrl() {\n      if (this.userInfo && this.userInfo.emailAddress) {\n        return this.userInfo.avatar === null ? \"http://akarana.oss-ap-southeast-1.aliyuncs.com/car1.jpg\" : this.userInfo.avatar;\n      }\n      return \"\";\n    }\n  },\n  components: {\n    GoogleAutocomplete\n  },\n  methods: {\n    handleAddressChange(event) {\n      this.editedUserInfo.address = event.target.value;\n    },\n    validateEmail() {\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailPattern.test(this.editedUserInfo.emailAddress)) {\n        this.emailError = \"Please enter a valid email address.\";\n        console.log(this.emailError);\n      } else {\n        this.emailError = \"\";\n      }\n    },\n    async save() {\n      if (this.editedUserInfo.birthday instanceof Date) {\n        this.editedUserInfo.birthday = this.editedUserInfo.birthday.toLocaleDateString('en-CA');\n      }\n      await this.$store.dispatch({\n        type: \"changeUserInfo\",\n        payload: this.editedUserInfo\n      });\n      this.btnState = true;\n      this.setEditedUserInfo();\n    },\n    setEditedUserInfo() {\n      this.editedUserInfo = {\n        ...this.$store.state.userInfo\n      };\n    },\n    updateGravatar() {\n      this.gravatarEmail = this.editedUserInfo.emailAddress;\n    }\n  },\n  created() {\n    {\n      console.log(localStorage.getItem(\"userInfo\"));\n      // ...\n      this.gravatarEmail = this.userInfo.emailAddress;\n    }\n    this.setEditedUserInfo();\n  }\n};","map":{"version":3,"names":["mapState","CryptoJS","GoogleAutocomplete","data","btnState","emailError","showEditForm","isCollapse","handleCollapse","editedUserInfo","firstName","lastName","phoneNumber","username","password","address","emailAddress","birthday","gravatarEmail","computed","userInfo","state","gravatarUrl","avatar","components","methods","handleAddressChange","event","target","value","validateEmail","emailPattern","test","console","log","save","Date","toLocaleDateString","$store","dispatch","type","payload","setEditedUserInfo","updateGravatar","created","localStorage","getItem"],"sources":["/Users/wucongzhen/Documents/GitHub/Akarana/src/src/views/Profile.vue"],"sourcesContent":["<template>\n \n    <Header :handleCollapse=\"handleCollapse\" :isCollapse=\"isCollapse\" />\n  <div class=\"user-profile\">\n    <h2 class=\"profile-title\">Personal Profile</h2>\n    <div v-if=\"userInfo\" class=\"profile-content\">\n      <img :src=\"gravatarUrl\" alt=\"用户头像\" class=\"user-avatar\" />\n      <div v-if=\"userInfo\" class=\"profile-content\">\n        <div class=\"change-avatar\"></div>\n        <div>\n          <p class=\"bold-text\">Email Address:</p>\n          <p v-if=\"btnState\">{{ userInfo.emailAddress }}</p>\n          <p v-else>\n            <input\n              id=\"emailAddress\"\n              v-model=\"editedUserInfo.emailAddress\"\n              type=\"text\"\n              @input=\"updateGravatar\"\n              @blur=\"validateEmail\"\n              :class=\"{ error: emailError }\"\n            />\n            <span v-if=\"emailError\" class=\"error\">{{ emailError }}</span>\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">First Name:</p>\n          <p v-if=\"btnState\">{{ userInfo.firstName }}</p>\n          <p v-else>\n            <input\n              id=\"firstName\"\n              v-model=\"editedUserInfo.firstName\"\n              type=\"text\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Last Name:</p>\n          <p v-if=\"btnState\">{{ userInfo.lastName }}</p>\n          <p v-else>\n            <input\n              id=\"lastName\"\n              v-model=\"editedUserInfo.lastName\"\n              type=\"text\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Phone Number:</p>\n          <p v-if=\"btnState\">{{ userInfo.phoneNumber }}</p>\n          <p v-else>\n            <input\n              id=\"phoneNumber\"\n              v-model=\"editedUserInfo.phoneNumber\"\n              type=\"text\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Username:</p>\n          <p v-if=\"btnState\">{{ userInfo.username }}</p>\n          <p v-else>\n            <input\n              id=\"username\"\n              v-model=\"editedUserInfo.username\"\n              type=\"text\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Password:</p>\n          <p v-if=\"btnState\">{{ userInfo.password }}</p>\n          <p v-else>\n            <input\n              id=\"password\"\n              v-model=\"editedUserInfo.password\"\n              type=\"text\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Address:</p>\n          <p v-if=\"btnState\">{{ userInfo.address }}</p>\n          <p v-else>\n            <google-autocomplete\n              id=\"address\"\n              v-model=\"editedUserInfo.address\"\n              type=\"text\"\n              @input=\"handleAddressChange\"\n            />\n          </p>\n        </div>\n        <div>\n          <p class=\"bold-text\">Birthday:</p>\n          <p v-if=\"btnState\">{{ userInfo.birthday }}</p>\n          <p v-else>\n            <el-date-picker\n            size=\"large\"\n            class=\"custom-datepicker\"\n      id=\"birthday\"\n     \n      v-model=\"editedUserInfo.birthday\"\n      type=“date”\n      placeholder=\"Select Birthday\"\n      format=\"YYYY-MM-DD\"\n    ></el-date-picker>\n          </p>\n        </div>\n        <button v-if=\"btnState\" @click=\"btnState = false\">Edit</button>\n        <button v-else :disabled=\"emailError !== ''\" @click=\"save\">Save</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport CryptoJS from \"crypto-js\";\nimport GoogleAutocomplete from \"../components/GoogleAutocomplete.vue\";\n\nexport default {\n  data() {\n    return {\n      btnState: true,\n      emailError: \"\",\n      showEditForm: false,\n      isCollapse: false,\n      handleCollapse: null,\n      editedUserInfo: {\n        firstName: \"\",\n        lastName: \"\",\n        phoneNumber: \"\",\n        username: \"\",\n        password: \"\",\n        address: \"\",\n        emailAddress: \"\",\n        birthday: \"\",\n        gravatarEmail: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapState({\n      userInfo: (state) => state.userInfo,\n    }),\n    // generate Gravatar URL\n    gravatarUrl() {\n      if (this.userInfo && this.userInfo.emailAddress) {\n        return this.userInfo.avatar === null\n          ? \"http://akarana.oss-ap-southeast-1.aliyuncs.com/car1.jpg\"\n          : this.userInfo.avatar;\n      }\n      return \"\";\n    },\n  },\n  components: {\n    GoogleAutocomplete,\n  },\n  methods: {\n    handleAddressChange(event) {\n    this.editedUserInfo.address = event.target.value;\n  },\n    validateEmail() {\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailPattern.test(this.editedUserInfo.emailAddress)) {\n        this.emailError = \"Please enter a valid email address.\";\n        console.log(this.emailError);\n      } else {\n        this.emailError = \"\";\n      }\n    },\n    async save() {\n      \n      if (this.editedUserInfo.birthday instanceof Date) {\n    this.editedUserInfo.birthday = this.editedUserInfo.birthday.toLocaleDateString('en-CA');\n  }\n      await this.$store.dispatch({\n        type: \"changeUserInfo\",\n        payload: this.editedUserInfo,\n      });\n      this.btnState = true;\n      this.setEditedUserInfo();\n    },\n    setEditedUserInfo() {\n      this.editedUserInfo = {\n        ...this.$store.state.userInfo,\n      };\n    },\n    updateGravatar() {\n      this.gravatarEmail = this.editedUserInfo.emailAddress;\n    },\n  },\n  created() {\n    {\n      console.log(localStorage.getItem(\"userInfo\"));\n      // ...\n      this.gravatarEmail = this.userInfo.emailAddress;\n    }\n    this.setEditedUserInfo();\n  },\n};\n</script>\n\n<style scoped>\n.bold-text {\n  font-weight: 900; /* 更粗的字体权重 */\n  font-size: 25px;\n  margin-top: -10px;\n  margin-bottom: -10px;\n  \n}\n.user-avatar {\n  width: 100px; /* 放大头像 */\n  height: 100px;\n  object-fit: cover;\n  border-radius: 50%;\n  margin: 20px auto;\n  display: block;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.user-profile {\n  width: 80%;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: #f5f5f5;\n  border-radius: 5px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  height: auto;\n}\n\n.profile-title {\n  text-align: center;\n  font-size: 48px;\n  font-weight: bold;\n  margin-bottom: -35px;\n  margin-top: -20px;\n  color: #333;\n  padding: 20px;\n}\n\n.profile-content {\n  padding: 20px;\n}\n\n\n\n.profile-content span {\n  color: #333;\n}\n\n.profile-content input {\n  flex-grow: 1;\n  height: 30px;\n  font-size: 18px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 6px 12px;\n  margin-left: 8px;\n \n  width: 20%; /* 增大输入框长度 */\n  border: none;\n  /* 边框颜色变灰色 */\n  border-bottom: 1px solid #ccc;\n} \n\n\nbutton {\n  width: 300px;\n  height: 40px;\n  background-color: #ff8936;\n  border: none;\n  color: white;\n  text-align: center;\n  display: inline-block;\n  font-size: 16px;\n  transition-duration: 0.4s;\n  cursor: pointer;\n  padding: 8px 16px;\n  border-radius: 4px;\n  margin-right: 20px; /* 修改此处 */\n  margin-bottom: 20px; /* 修改此处 */\n}\n\n.custom-datepicker .el-input__inner {\n  width: 100%; /* 修改此处以自定义输入框的宽度 */\n}\n\n\n\nbutton:hover {\n  \n  border-bottom: 1px solid #ccc;\n}\n\n.editbut {\n  background-color: #1e90ff;\n}\n\n.editbut:hover {\n  \n}\n\n.profile-content input.error {\n  border-color: red;\n  border-bottom: 1px solid #ccc;\n}\ninput.error {\n  border-color: red;\n  color: red;\n}\n.error,\n.profile-content span[data-v-ced23842].error {\n  color: red;\n  \n}\n/* 日期选择器宽度 */\n\n</style>"],"mappings":"AAmHA,SAASA,QAAO,QAAS,MAAM;AAC/B,OAAOC,QAAO,MAAO,WAAW;AAChC,OAAOC,kBAAiB,MAAO,sCAAsC;AAErE,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IAAI;MACdC,UAAU,EAAE,EAAE;MACdC,YAAY,EAAE,KAAK;MACnBC,UAAU,EAAE,KAAK;MACjBC,cAAc,EAAE,IAAI;MACpBC,cAAc,EAAE;QACdC,SAAS,EAAE,EAAE;QACbC,QAAQ,EAAE,EAAE;QACZC,WAAW,EAAE,EAAE;QACfC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,OAAO,EAAE,EAAE;QACXC,YAAY,EAAE,EAAE;QAChBC,QAAQ,EAAE,EAAE;QACZC,aAAa,EAAE;MACjB;IACF,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGnB,QAAQ,CAAC;MACVoB,QAAQ,EAAGC,KAAK,IAAKA,KAAK,CAACD;IAC7B,CAAC,CAAC;IACF;IACAE,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAACF,QAAO,IAAK,IAAI,CAACA,QAAQ,CAACJ,YAAY,EAAE;QAC/C,OAAO,IAAI,CAACI,QAAQ,CAACG,MAAK,KAAM,IAAG,GAC/B,yDAAwD,GACxD,IAAI,CAACH,QAAQ,CAACG,MAAM;MAC1B;MACA,OAAO,EAAE;IACX;EACF,CAAC;EACDC,UAAU,EAAE;IACVtB;EACF,CAAC;EACDuB,OAAO,EAAE;IACPC,mBAAmBA,CAACC,KAAK,EAAE;MAC3B,IAAI,CAAClB,cAAc,CAACM,OAAM,GAAIY,KAAK,CAACC,MAAM,CAACC,KAAK;IAClD,CAAC;IACCC,aAAaA,CAAA,EAAG;MACd,MAAMC,YAAW,GAAI,4BAA4B;MACjD,IAAI,CAACA,YAAY,CAACC,IAAI,CAAC,IAAI,CAACvB,cAAc,CAACO,YAAY,CAAC,EAAE;QACxD,IAAI,CAACX,UAAS,GAAI,qCAAqC;QACvD4B,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC7B,UAAU,CAAC;MAC9B,OAAO;QACL,IAAI,CAACA,UAAS,GAAI,EAAE;MACtB;IACF,CAAC;IACD,MAAM8B,IAAIA,CAAA,EAAG;MAEX,IAAI,IAAI,CAAC1B,cAAc,CAACQ,QAAO,YAAamB,IAAI,EAAE;QACpD,IAAI,CAAC3B,cAAc,CAACQ,QAAO,GAAI,IAAI,CAACR,cAAc,CAACQ,QAAQ,CAACoB,kBAAkB,CAAC,OAAO,CAAC;MACzF;MACI,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC;QACzBC,IAAI,EAAE,gBAAgB;QACtBC,OAAO,EAAE,IAAI,CAAChC;MAChB,CAAC,CAAC;MACF,IAAI,CAACL,QAAO,GAAI,IAAI;MACpB,IAAI,CAACsC,iBAAiB,EAAE;IAC1B,CAAC;IACDA,iBAAiBA,CAAA,EAAG;MAClB,IAAI,CAACjC,cAAa,GAAI;QACpB,GAAG,IAAI,CAAC6B,MAAM,CAACjB,KAAK,CAACD;MACvB,CAAC;IACH,CAAC;IACDuB,cAAcA,CAAA,EAAG;MACf,IAAI,CAACzB,aAAY,GAAI,IAAI,CAACT,cAAc,CAACO,YAAY;IACvD;EACF,CAAC;EACD4B,OAAOA,CAAA,EAAG;IACR;MACEX,OAAO,CAACC,GAAG,CAACW,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;MAC7C;MACA,IAAI,CAAC5B,aAAY,GAAI,IAAI,CAACE,QAAQ,CAACJ,YAAY;IACjD;IACA,IAAI,CAAC0B,iBAAiB,EAAE;EAC1B;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
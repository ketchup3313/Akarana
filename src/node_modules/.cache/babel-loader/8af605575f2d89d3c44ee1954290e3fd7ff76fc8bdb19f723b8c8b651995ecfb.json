{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, withKeys as _withKeys, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-26084dc2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bgp\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"login_container\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"MemberOnly\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_avatar = _resolveComponent(\"avatar\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_key = _resolveComponent(\"key\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createVNode(_component_el_form, {\n    class: \"login_form\",\n    model: $setup.userInfo,\n    rules: $setup.rules,\n    onKeyup: _withKeys($setup.onLogin, [\"enter\"]),\n    ref: \"ref_form\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"userName\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        placeholder: \"username\",\n        modelValue: $setup.userInfo.userName,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.userInfo.userName = $event),\n        modelModifiers: {\n          trim: true\n        }\n      }, {\n        prepend: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_avatar)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        placeholder: \"passowrd\",\n        \"show-password\": \"\",\n        modelValue: $setup.userInfo.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.userInfo.password = $event),\n        modelModifiers: {\n          trim: true\n        }\n      }, {\n        prepend: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_key)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      class: \"login_submit\",\n      onClick: $setup.onLogin\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Login\")]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", {\n      class: \"login_register\",\n      onClick: $setup.openPdf\n    }, \"Register form\"), _createCommentVNode(\" <div class=\\\"test\\\"></div> \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"onKeyup\"])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_el_form","model","$setup","userInfo","rules","onKeyup","_withKeys","onLogin","ref","_component_el_form_item","prop","_component_el_input","placeholder","userName","$event","trim","prepend","_withCtx","_component_el_icon","_component_avatar","password","_component_key","_component_el_button","type","onClick","openPdf","_createCommentVNode"],"sources":["/Users/wucongzhen/Documents/GitHub/Akarana/src/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"bgp\"></div>\n    <div class=\"login_container\">\n      <h1>MemberOnly</h1>\n      <el-form class=\"login_form\" :model=\"userInfo\" :rules=\"rules\" @keyup.enter=\"onLogin\" ref=\"ref_form\">\n        <el-form-item prop=\"userName\">\n          <el-input placeholder=\"username\" v-model.trim=\"userInfo.userName\">\n            <template #prepend>\n              <el-icon>\n                <avatar />\n              </el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"password\">\n          <el-input placeholder=\"passowrd\" show-password v-model.trim=\"userInfo.password\">\n            <template #prepend>\n              <el-icon>\n                <key />\n              </el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-button type=\"primary\" class=\"login_submit\" @click=\"onLogin\">Login</el-button>\n        <div class=\"login_register\" @click=\"openPdf\">Register form</div>\n        <!-- <div class=\"test\"></div> -->\n      </el-form>\n    </div>\n  </div>\n</template>\n\n\n<script setup>\nimport store from '../store/index'\nimport http from '@/utils/request'\nimport router from \"../router/index\";\nimport axios from 'axios'\nimport { reactive, ref } from \"vue\";\nimport { onMounted, onUnmounted } from \"vue\";\nconst openPdf = () => {\n  const pdfPath = process.env.BASE_URL + 'applicationform.pdf';\n  window.open(pdfPath, '_blank');\n};\n\n\n// 初始的ref\nconst ref_form = ref(null);\n// 表单的数据声明\nconst userInfo = reactive({\n  userName: \"\",\n  password: \"\",\n});\n\n// 表单数据校验规则\nconst rules = {\n  userName: [\n    { required: \"true\", trigger: \"blur\", message: \"Please input user name\" },\n  ],\n  password: [\n    { required: \"true\", trigger: \"blur\", message: \"Please input password\" },\n  ],\n};\n// 登录的方法\nconsole.log(\"1\");\nconst onLogin = () => {\n  console.log(\"2\");\n  \n  ref_form.value.validate((val) => {\n    if (val) {\n      getLoginData();\n    }\n  });\n};\n// 获取登录数据\nconst getLoginData = async () => {\n  console.log(\"3\");\n\n  const { data: { status, msg, token ,userInfo:myuserInfo} } = await http.post('/api/login', {\n    \n    username: userInfo.userName,\n    password: userInfo.password\n  });\n  console.log(\"4\");\n  if (status === 1) {\n    console.log(\"5\");\n    ElMessage({\n      message: `${msg}`,\n      type: \"error\",\n    });\n    return;\n  }\n\n  if (status === 0) {\n    ElMessage({\n      message: \"Welcome back, \" + userInfo.userName,\n     \n      type: \"success\",\n    });\n    // localStorage.setItem('userId',myuserInfo.id);  \n    store.dispatch({\n      type:'getUserInfo',\n      payload:myuserInfo.id\n    })\n    localStorage.setItem('@#@TOKEN', token)\n    router.push(\"/home\");\n  }\n\n};\n\nlet bgMoveHandler;\n\nonMounted(() => {\n  bgMoveHandler = (e) => {\n    const x = e.clientX / window.innerWidth;\n    const y = e.clientY / window.innerHeight;\n    const xOffset = -(x * 20);\n    const yOffset = -(y * 20);\n\n    const login = document.querySelector(\".login\");\n    login.style.backgroundPosition = `calc(50% + ${xOffset}px) calc(50% + ${yOffset}px)`;\n  };\n  document.addEventListener(\"mousemove\", bgMoveHandler);\n});\n\nonUnmounted(() => {\n  document.removeEventListener(\"mousemove\", bgMoveHandler);\n    \n});\n</script>\n\n<style lang=\"less\" scoped>\n@-webkit-keyframes fadenum {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.login {\n  height: 100%;\n  height: 100%;\n  //图片\n\n  background-image: url(\"../../public/png.jpeg\");\n  background-repeat: no-repeat;\n  background-size: calc(100% + 40px) calc(100% + 40px);\n\n  background-position: 50% 50%;\n  background-attachment: fixed;\n\n  .el-icon {\n    height: 30px !important;\n  }\n\n  .login_container {\n    animation: fadenum 1s ease;\n    position: absolute;\n    z-index: 1;\n    width: 400px;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    transition: all 1s;\n    min-height: 273px;\n    text-align: center;\n    background-color: #fff;\n    border-radius: 10px;\n    padding: 20px;\n\n    h1 {\n      font-size: 24px;\n      transition: all 1s;\n      font-weight: bold;\n      margin-bottom: 36px;\n    }\n\n    .el-card {\n      border-radius: 20px;\n    }\n\n    .login_form {\n      .login_submit {\n        width: 100%;\n        height: 50px;\n        border-radius: 20px;\n        margin-bottom: 10px;\n        margin-top: 5px;\n      }\n\n      .login_register {\n        width: 6.25rem;\n        font-size: 0.875rem;\n        margin: 0 auto;\n      }\n      .test{\n        // 字体变小\n        font-size: 0.575rem;\n        // 字体颜色\n        color: #999;\n        margin-top: 10px;\n\n      }\n\n      :deep(.el-input-group__prepend) {\n        padding: 0 10px;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAO;gEAChBC,mBAAA,CAAuB;EAAlBD,KAAK,EAAC;AAAK;;EACXA,KAAK,EAAC;AAAiB;gEAC1BC,mBAAA,CAAmB,YAAf,YAAU;;;;;;;;;;uBAHlBC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,UAAuB,EACvBH,mBAAA,CA0BM,OA1BNI,UA0BM,GAzBJC,UAAmB,EACnBC,YAAA,CAuBUC,kBAAA;IAvBDR,KAAK,EAAC,YAAY;IAAES,KAAK,EAAEC,MAAA,CAAAC,QAAQ;IAAGC,KAAK,EAAEF,MAAA,CAAAE,KAAK;IAAGC,OAAK,EAAAC,SAAA,CAAQJ,MAAA,CAAAK,OAAO;IAAEC,GAAG,EAAC;;sBACtF,MAQe,CARfT,YAAA,CAQeU,uBAAA;MARDC,IAAI,EAAC;IAAU;wBAC3B,MAMW,CANXX,YAAA,CAMWY,mBAAA;QANDC,WAAW,EAAC,UAAU;oBAAeV,MAAA,CAAAC,QAAQ,CAACU,QAAQ;mEAAjBX,MAAA,CAAAC,QAAQ,CAACU,QAAQ,GAAAC,MAAA;wBAA/B;UAAAC,IAAA;QAAA;;QACpBC,OAAO,EAAAC,QAAA,CAChB,MAEU,CAFVlB,YAAA,CAEUmB,kBAAA;4BADR,MAAU,CAAVnB,YAAA,CAAUoB,iBAAA,E;;;;;;;QAMlBpB,YAAA,CAQeU,uBAAA;MARDC,IAAI,EAAC;IAAU;wBAC3B,MAMW,CANXX,YAAA,CAMWY,mBAAA;QANDC,WAAW,EAAC,UAAU;QAAC,eAAa,EAAb,EAAa;oBAAeV,MAAA,CAAAC,QAAQ,CAACiB,QAAQ;mEAAjBlB,MAAA,CAAAC,QAAQ,CAACiB,QAAQ,GAAAN,MAAA;wBAA/B;UAAAC,IAAA;QAAA;;QAClCC,OAAO,EAAAC,QAAA,CAChB,MAEU,CAFVlB,YAAA,CAEUmB,kBAAA;4BADR,MAAO,CAAPnB,YAAA,CAAOsB,cAAA,E;;;;;;;QAKftB,YAAA,CAAiFuB,oBAAA;MAAtEC,IAAI,EAAC,SAAS;MAAC/B,KAAK,EAAC,cAAc;MAAEgC,OAAK,EAAEtB,MAAA,CAAAK;;wBAAS,MAAK,C,iBAAL,OAAK,E;;QACrEd,mBAAA,CAAgE;MAA3DD,KAAK,EAAC,gBAAgB;MAAEgC,OAAK,EAAEtB,MAAA,CAAAuB;OAAS,eAAa,GAC1DC,mBAAA,gCAAiC,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}
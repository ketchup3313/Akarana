"use strict";(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[227],{4395:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var l=n(9714),s=n(6252),i=n(3577);const a=e=>((0,s.dD)("data-v-e8ec187c"),e=e(),(0,s.Cn)(),e),o={class:"container"},r={key:0},d={class:"header_my"},u={class:"content clearfix"},c=["src"],p={class:"section_join"},v={key:0},g={key:1},m=["disabled"],b={class:"small"},f={class:"small_item"},y=a((()=>(0,s._)("h3",{class:"bulletintext"}," Time ",-1))),h={class:"small_item"},w=a((()=>(0,s._)("h3",{class:"bulletintext"}," Address ",-1))),x=["innerHTML"],k={class:"participants-section"},C=a((()=>(0,s._)("h3",null,"Who want to join:",-1))),_={key:0},$=a((()=>(0,s._)("h3",{class:"bulletintext"},"Bulletin:",-1))),I={class:"download-pdf-button"};function L(e,t,n,a,L,D){const T=l.Z;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(T,{handleCollapse:e.handleCollapse,isCollapse:e.isCollapse},null,8,["handleCollapse","isCollapse"]),(0,s._)("div",o,["{}"!==JSON.stringify(L.details)?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("header",d,[(0,s._)("h2",null,(0,i.zw)(L.details.mainTitle),1),(0,s._)("p",u,[(0,s._)("img",{align:"right",style:{"min-width":"500px","max-width":"500px"},height:"340",src:L.details.image,alt:"img",class:"img"},null,8,c),(0,s.Uk)(" "+(0,i.zw)(L.details.content),1)])]),(0,s._)("section",p,["open"===L.details.status?((0,s.wg)(),(0,s.iD)("span",v,"Group is open")):((0,s.wg)(),(0,s.iD)("span",g,"Group is close")),(0,s._)("button",{onClick:t[0]||(t[0]=e=>D.requestJoin(L.details.id)),class:(0,i.C_)(["btn",{"btn-disabled":"close"===L.details.status}]),disabled:"close"===L.details.status},(0,i.zw)("open"===L.details.status?"Request to join":"This activity is closed"),11,m)]),(0,s._)("section",b,[(0,s._)("div",f,[y,(0,s._)("p",null,(0,i.zw)(L.details.time),1)]),(0,s._)("div",h,[w,(0,s._)("p",null,[(0,s.Uk)((0,i.zw)(L.details.address)+" ",1),(0,s._)("div",{innerHTML:L.details.mapUrl},null,8,x)]),(0,s._)("div",k,[C,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.participants,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,i.zw)(e.username),1)))),128))]),0===L.participants.length?((0,s.wg)(),(0,s.iD)("p",_," There are no participants for this rally yet. ")):(0,s.kq)("",!0),$,(0,s._)("div",I,[(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>D.previewPdf&&D.previewPdf(...e)),class:"btn download-pdf-btn"},"Download PDF")])])])])])):(0,s.kq)("",!0)])])}var D=n(1464),T=(n(8438),n(2082)),z=n(3028),P={data(){return{details:{},participants:[],bulletin:[],urlWithTimestamp:[]}},methods:{previewPdf(){if(this.details.bulletin){const e=(new Date).getTime(),t=`${this.details.bulletin}?t=${e}`;console.log(t),window.open(t)}else(0,D.z8)({message:"No PDF available.",type:"warning"})},async requestJoin(e){let t=await T.Z.post("/api/rally/requestJoin",{userid:this.$store.state.userInfo.id,username:this.$store.state.userInfo.username,rallyid:e}),{msg:n,status:l}=t.data;1===l?(0,D.z8)({message:n,type:"error"}):(0,D.z8)({message:n,type:"success"})}},async created(){let{id:e}=this.$route.query;const t=z.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});try{const[t,n]=await Promise.all([T.Z.get(`/api/rally/queryParticipants?rallyid=${e}`),T.Z.get(`/api/rally/queryInfo?id=${e}`)]);let{data:l,status:s}=t.data;0===s&&(this.participants=l);let{data:i,status:a}=n.data;0===a&&(this.details=i)}catch(n){console.error(n)}finally{t.close()}}},V=n(3744);const q=(0,V.Z)(P,[["render",L],["__scopeId","data-v-e8ec187c"]]);var A=q},3028:function(e,t,n){n.d(t,{kN:function(){return w}});var l=n(6252),s=n(2262),i=n(9963),a=n(8360),o=n(9106);function r(e){let t;const n=(0,s.iH)(!1),r=(0,s.qj)({...e,originalPosition:"",originalOverflow:"",visible:!1});function d(e){r.text=e}function u(){const e=r.parent,t=b.ns;if(!e.vLoadingAddClassList){let n=e.getAttribute("loading-number");n=Number.parseInt(n)-1,n?e.setAttribute("loading-number",n.toString()):((0,a.IV)(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),(0,a.IV)(e,t.bm("parent","hidden"))}c(),m.unmount()}function c(){var e,t;null==(t=null==(e=b.$el)?void 0:e.parentNode)||t.removeChild(b.$el)}function p(){var l;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(v,400),r.visible=!1,null==(l=e.closed)||l.call(e))}function v(){if(!n.value)return;const e=r.parent;n.value=!1,e.vLoadingAddClassList=void 0,u()}const g=(0,l.aZ)({name:"ElLoading",setup(e,{expose:t}){const{ns:n,zIndex:s}=(0,o.cU)("loading");return t({ns:n,zIndex:s}),()=>{const e=r.spinner||r.svg,t=(0,l.h)("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...e?{innerHTML:e}:{}},[(0,l.h)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),s=r.text?(0,l.h)("p",{class:n.b("text")},[r.text]):void 0;return(0,l.h)(i.uT,{name:n.b("fade"),onAfterLeave:v},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)("div",{style:{backgroundColor:r.background||""},class:[n.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[(0,l.h)("div",{class:n.b("spinner")},[t,s])]),[[i.F8,r.visible]])]))})}}}),m=(0,i.ri)(g),b=m.mount(document.createElement("div"));return{...(0,s.BK)(r),setText:d,removeElLoadingChild:c,close:p,handleAfterLeave:v,vm:b,get $el(){return b.$el}}}var d=n(1218),u=n(3577);let c;const p=function(e={}){if(!d.C5)return;const t=v(e);if(t.fullscreen&&c)return c;const n=r({...t,closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(c=void 0)}});g(t,t.parent,n),m(t,t.parent,n),t.parent.vLoadingAddClassList=()=>m(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s=s?`${Number.parseInt(s)+1}`:"1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),(0,l.Y3)((()=>n.visible.value=t.visible)),t.fullscreen&&(c=n),n},v=e=>{var t,n,l,s;let i;return i=(0,u.HD)(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:i===document.body||e.body?document.body:i,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:i===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(l=e.lock)&&l,customClass:e.customClass||"",visible:null==(s=e.visible)||s,target:i}},g=async(e,t,n)=>{const{nextZIndex:s}=n.vm.zIndex,i={};if(e.fullscreen)n.originalPosition.value=(0,a.C2)(document.body,"position"),n.originalOverflow.value=(0,a.C2)(document.body,"overflow"),i.zIndex=s();else if(e.parent===document.body){n.originalPosition.value=(0,a.C2)(document.body,"position"),await(0,l.Y3)();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";i[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt((0,a.C2)(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])i[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=(0,a.C2)(t,"position");for(const[l,a]of Object.entries(i))n.$el.style[l]=a},m=(e,t,n)=>{const l=n.vm.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?(0,a.IV)(t,l.bm("parent","relative")):(0,a.cn)(t,l.bm("parent","relative")),e.fullscreen&&e.lock?(0,a.cn)(t,l.bm("parent","hidden")):(0,a.IV)(t,l.bm("parent","hidden"))},b=Symbol("ElLoading"),f=(e,t)=>{var n,l,i,a;const o=t.instance,r=e=>(0,u.Kn)(t.value)?t.value[e]:void 0,d=e=>{const t=(0,u.HD)(e)&&(null==o?void 0:o[e])||e;return t?(0,s.iH)(t):t},c=t=>d(r(t)||e.getAttribute(`element-loading-${(0,u.rs)(t)}`)),v=null!=(n=r("fullscreen"))?n:t.modifiers.fullscreen,g={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:v,target:null!=(l=r("target"))?l:v?void 0:e,body:null!=(i=r("body"))?i:t.modifiers.body,lock:null!=(a=r("lock"))?a:t.modifiers.lock};e[b]={options:g,instance:p(g)}},y=(e,t)=>{for(const n of Object.keys(t))(0,s.dq)(t[n])&&(t[n].value=e[n])},h={mounted(e,t){t.value&&f(e,t)},updated(e,t){const n=e[b];t.oldValue!==t.value&&(t.value&&!t.oldValue?f(e,t):t.value&&t.oldValue?(0,u.Kn)(t.value)&&y(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[b])||t.instance.close()}},w={install(e){e.directive("loading",h),e.config.globalProperties.$loading=p},directive:h,service:p}}}]);
//# sourceMappingURL=227.8c58a3fd.js.map